<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu Multijoueur</title>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
</head>
<body>
    <h1>Jeu Multijoueur</h1>

    <!-- Création de partie -->
    <div>
        <input id="gameName" type="text" placeholder="Nom de la partie">
        <button id="createGameBtn">Créer une partie</button>
    </div>

    <!-- Liste des parties -->
    <h2>Parties disponibles</h2>
    <ul id="gamesList"></ul>

    <script>
        const socket = io();

        // Écouter les mises à jour des parties
        socket.on('update-games', (games) => {
            const gamesList = document.getElementById('gamesList');
            gamesList.innerHTML = ''; // Réinitialiser la liste
            Object.values(games).forEach((game) => {
                const li = document.createElement('li');
                li.textContent = `${game.name} (${game.players.length}/2) - ${game.status}`;

                if (game.status === 'waiting') {
                    const joinBtn = document.createElement('button');
                    joinBtn.textContent = 'Rejoindre';
                    joinBtn.onclick = () => {
                        socket.emit('join-game', game.id);
                    };
                    li.appendChild(joinBtn);
                }
                gamesList.appendChild(li);
            });
        });

        // Création de partie
        document.getElementById('createGameBtn').addEventListener('click', () => {
            const gameName = document.getElementById('gameName').value;
            socket.emit('create-game', { name: gameName });
        });

        // Notification de la création de la partie
        socket.on('game-created', (game) => {
            alert(`Partie créée : ${game.name}`);
        });

        // Notification du démarrage de la partie
        socket.on('game-start', (game) => {
            alert(`La partie ${game.name} commence !`);
            // Vous pouvez rediriger ou charger l'interface du jeu ici
        });
    </script>
</body>
</html>
